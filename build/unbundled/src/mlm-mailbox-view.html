<html><head><link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/plutonium-elements/plutonium-widget-behavior.html">
<link rel="import" href="mlm-shared-styles.html">


</head><body><dom-module id="mlm-mailbox-view">

    <template>

        <style include="mlm-shared-styles iron-flex iron-flex-alignment">
            :host {
                display: block;
                @apply(--layout-vertical);
            }

            

        </style>

        
        
        <iron-list items="[[mailBoxModel]]" as="message" hidden="[[isEmpty(mailBoxModel)]]" class="layout vertical">
            <template>
                <paper-item class="layout horizontal">
                    <paper-material class="flex layout horizontal" tabindex="[[tabIndex]]">
                        <div class="flex">
                            <div class="layout horizontal">
                                <div class="layout vertical">
                                    <span hidden="[[isOutbox(selectedMailBoxFolder)]]">From: [[message.fromName]]</span>
                                    <span hidden="[[isInbox(selectedMailBoxFolder)]]">To: [[message.toName]]</span>
                                </div>
                                <div class="flex"></div>
                                <span>[[message.ts]]</span>
                            </div>
                            <div class="secondary">
                                <span>[[message.message]]</span>
                            </div>
                        </div>
                    </paper-material>
                </paper-item>
            </template>
        </iron-list>
        
        
        
        <paper-card elevation="1" hidden="[[!isEmpty(mailBoxModel)]]">
            <div class="card-content">
                <div id="emptyMailBoxFolderText">No messages in the folder.</div>
            </div>
        </paper-card>
        
        <div class="floating-action-bar layout horizontal wrap">
            <paper-fab icon="icons:add" on-tap="onNewMessage"></paper-fab>
        </div>
    </template>

    <script>Polymer({is:"mlm-mailbox-view",behaviors:[PlutoniumBehaviors.WidgetBehavior],properties:{selectedMailBoxFolder:{type:String,notify:!0,value:"inbox"},accountId:{type:String,notify:!0},mailBoxModel:{type:Object,notify:!0}},observers:["computeMailboxFolderRequest(accountId, selectedMailBoxFolder)"],ready:function(){console.log(this.is+" is ready.")},getItemClasses:function(e){return e.tags.join(" ")},computeMailboxFolderRequest:function(e,o){console.log(this.is+" fetch "+o+" from "+e+"'s mailbox."),this.$.mailBoxAjax.generateRequest()},isOutbox:function(e){return"outbox"===e},isInbox:function(e){return"inbox"===e},isEmpty:function(e){return void 0===e||null===e||0===e.length},onNewMessage:function(){this.fire("new-message",{bubbles:!1})}});</script>

</dom-module></body></html>