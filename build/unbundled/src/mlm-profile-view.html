<html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-card/paper-card.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-checkbox/paper-checkbox.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="mlm-shared-styles.html">
<link rel="import" href="../plutonium-elements/plutonium-widget-behavior.html">


</head><body><dom-module id="mlm-profile-view">

    <template>

        <style include="mlm-shared-styles">
            :host > paper-card {
                /*                display: block;
                                padding: 10px;*/


            }

            paper-card {

            }



            .circle {
                display: inline-block;
                height: 64px;
                width: 64px;
                border-radius: 50%;
                background: #ddd;
                line-height: 64px;
                font-size: 30px;
                color: #555;
                text-align: center;
            }
            h1 {
                font-size: 22px;
                margin: 16px 0;
                color: #212121;
            }

        </style>

        <paper-card id="accountHeading" heading="Account" class="layout vertical">
            <div class="card-content">
                <div>
                    <label id="activationDateTitle">Activation date</label>
                    <span>[[profile.activated]]</span>
                </div>
                <div>
                    <paper-dropdown-menu id="preferredLanguageLabel" label="Preferred language">
                        <paper-menu class="dropdown-content">
                            <paper-menu class="dropdown-content" selected="{{profile.preferredLanguage}}" attr-for-selected="data-value">
                                <template is="dom-repeat" items="[[locales]]" as="locale">
                                    <paper-item data-value="[[locale.code]]">[[locale.name]]</paper-item>
                                </template>
                            </paper-menu>
                        </paper-menu>
                    </paper-dropdown-menu>
                </div>
            </div>
            <div class="card-actions">
                <paper-button id="changingDeviceButton" raised="" on-tap="openChangeDevicePrompt">Changing device</paper-button>
            </div>
        </paper-card>
        
        <paper-card id="tutorialsHeading" heading="Tutorials" class="layout vertical flex">
            <p id="underDevelopmentText" class="card-content">Under development ...</p>
        </paper-card>

    </template>

    <script>Polymer({is:"mlm-profile-view",behaviors:[PlutoniumBehaviors.WidgetBehavior],properties:{accountId:{type:String,notify:!0},locales:{type:Array,notify:!0},_init:{type:Object,notify:!0,value:!1},_changeLanguageModel:{type:Object,notify:!0}},listeners:{"iron-select":"onSelect"},ready:function(){console.log(this.is+" is ready.")},attached:function(){},onSelect:function(e,t){this._init?(this._changeLanguageModel={accountId:this.profile.id,language:this.profile.preferredLanguage},console.log("Change language request: "+JSON.stringify(this._changeLanguageModel)),this.$.changeLanguageAjax.generateRequest()):this._init=!0},handleChangeLanguageResponse:function(){var e="Language changed successfully to "+this.locales.filter(function(e,t,n){return e.code===this.profile.preferredLanguage},this)[0].name+".";console.log(e);var t=document.querySelector("html").getAttribute("lang");document.querySelector("html").setAttribute("lang",this.profile.preferredLanguage);var n=document.querySelector("html").getAttribute("lang");console.log("Change from locale "+t+" to "+n),this.fire("feedback",{message:e})},handleChangeLanguageError:function(){var e="Language changing failed.";console.log(e),this.fire("feedback",{message:e})},onDeviceChangePrompted:function(){this.fire("feedback",{message:"Device changing request sent. Wait for your inviter's approval."})},openChangeDevicePrompt:function(){this.fire("change-device",{})}});</script>

</dom-module></body></html>